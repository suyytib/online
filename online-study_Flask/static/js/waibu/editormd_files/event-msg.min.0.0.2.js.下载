"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,c,i=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){var a=new Map([["issue","issue"],["mr","pull request"]]);function o(e){var t={};try{t=e.split(",").map(function(e){return e.trim()}).reduce(function(e,t){var t=_slicedToArray(t.split(":"),2),r=t[0],t=t[1];return e[r]=t,e},{})}catch(e){console.log(e)}return t}function n(e){return e.replace(/#(\d+),(\*\*)/gi,function(e){return"#"+(arguments.length<=1?void 0:arguments[1])+"_,a58d,_"+(arguments.length<=2?void 0:arguments[2])}).split("_,a58d,_")}var i={title:[{pattern:/^(changed)\s(title)\s(.*\*\*(.*)\*\*.*to.*\*\*(.*)\*\*)/,transform:function(e,t){return e.replace(t,function(e){return"修改标题为 “".concat(arguments.length<=5?void 0:arguments[5],"”，原标题为“").concat(arguments.length<=4?void 0:arguments[4],"”")})}},{pattern:/^(marked) (.*)/,transform:function(e,t){return e.replace(t,function(e){return"设置为草稿状态"})}},{pattern:/^(unmarked) (.*)/,transform:function(e,t){return e.replace(t,function(e){return"取消了草稿状态"})}}],description:[{pattern:/^(changed)(.*)(description)/,transform:function(e,t,r){var n=r.type;return e.replace(t,function(e){return"修改了".concat(a.get(n),"的描述")})}}],label:[{pattern:/^(add) (label) (.*) (and) (delete) (label) (.*)/,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"添加了label：".concat(arguments.length<=3?void 0:arguments[3],"；删除了label：").concat(arguments.length<=7?void 0:arguments[7])})}},{pattern:/^(add) (label) (.*)/,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"添加了label：".concat(arguments.length<=3?void 0:arguments[3])})}},{pattern:/^(delete) (label) (.*)/,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"删除了label：".concat(arguments.length<=3?void 0:arguments[3])})}}],assignee:[{pattern:/^(assigned) (to) @(.*) (and) (unassigned) @(.*)/,transform:function(e,t,r){var r=r.type,n="";return"issue"==r?n="负责人":"mr"==r&&(n="合入人"),e.replace(t,function(e){return"将 ".concat(arguments.length<=3?void 0:arguments[3]," 设为").concat(n,"，原").concat(n,"为 ").concat(arguments.length<=6?void 0:arguments[6])})}},{pattern:/^(assigned) (to) @(.*)/,transform:function(e,t,r){var r=r.type,n="";return"issue"==r?n="负责人":"mr"==r&&(n="合入人"),e.replace(t,function(e){return"将 ".concat(arguments.length<=3?void 0:arguments[3]," 设为").concat(n)})}},{pattern:/^(unassigned) @(.*)/,transform:function(e,t,r){var r=r.type,n="";return"issue"==r?n="负责人":"mr"==r&&(n="合入人"),e.replace(t,function(e){return"移除了".concat(n," ").concat(arguments.length<=2?void 0:arguments[2])})}}],milestone:[{pattern:/^(removed) (milestone)/,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了里程碑"})}},{pattern:/^(changed) (milestone) to (.*)/,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"关联了里程碑：".concat(arguments.length<=3?void 0:arguments[3])})}}],locked:[{pattern:/^(locked) (.*) (Issue)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"锁定了 Issue"})}},{pattern:/^(locked) (.*) (Merge)/,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"锁定了 pull request"})}}],unlocked:[{pattern:/^(unlocked) (.*) (Issue)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"解除了 Issue 的锁定状态"})}},{pattern:/^(locked) (.*) (Merge)/,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"锁定了 pull request"})}}],closed:[{pattern:/^(closed) (from) (.*)/,transform:function(e,t,r){var n=r.type;return e.replace(t,function(e){return"关闭了".concat(a.get(n))})}}],opened:[{pattern:/^(opened) (from) (.*)/,transform:function(e,t,r){var n=r.type;return e.replace(t,function(e){return"打开了".concat(a.get(n))})}},{pattern:/^(reopened|reopen) (from) (.*)/,transform:function(e,t,r){var n=r.type;return e.replace(t,function(e){return"重新打开了".concat(a.get(n))})}}],add_issue_mr_link:[{pattern:/^(Create) (issue) (mr links): (.*)/i,transform:function(e,t,r){r.type,r.data;return e.replace(t,function(e){var t=n(arguments.length<=4?void 0:arguments[4]).map(function(e){e=e.match(/\*\*(.*)\*\* #(.*)/);return{title:e[1],id:e[2]}}).map(function(e){return e.title}).join("，");return"关联了pull request：".concat(t)})}}],delete_issue_mr_link:[{pattern:/^(delete) (issue) (mr links): (.*)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){var t=n(arguments.length<=4?void 0:arguments[4]).map(function(e){e=e.match(/\*\*(.*)\*\* #(.*)/);return{title:e[1],id:e[2]}}).map(function(e){return e.title}).join("，");return"删除了关联的pull request：".concat(t)})}}],add_mr_issue_link:[{pattern:/^(Create) (mr) (issue link): (.*)/i,transform:function(e,t,r){r.type,r.data;return e.replace(t,function(e){var t=n(arguments.length<=4?void 0:arguments[4]).map(function(e){e=e.match(/\*\*(.*)\*\* #(.*)/);return{title:e[1],id:e[2]}}).map(function(e){return e.title}).join("，");return"关联了issue：".concat(t)})}}],delete_mr_issue_link:[{pattern:/^(delete) (mr) (issue link): (.*)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){var t=n(arguments.length<=4?void 0:arguments[4]).map(function(e){e=e.match(/\*\*(.*)\*\* #(.*)/);return{title:e[1],id:e[2]}}).map(function(e){return e.title}).join("，");return"删除了关联的issue：".concat(t)})}}],close_relation_issue:[{pattern:/^close relation issue(.*)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"关闭了关联的issue"})}}],mr_change:[{pattern:/^(Add) (assignees): (.+);\s?(Delete) (assignees): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为合入人；移除了").concat(arguments.length<=6?void 0:arguments[6])})}},{pattern:/^(Delete) (assignees): (.+);\s?(Add) (assignees): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了".concat(arguments.length<=3?void 0:arguments[3],"；将").concat(arguments.length<=6?void 0:arguments[6],"设为合入人")})}},{pattern:/^(Add) (assignees): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为合入人")})}},{pattern:/^(Delete) (assignees): (.*);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了合入人".concat(arguments.length<=3?void 0:arguments[3])})}},{pattern:/^(Add) (approvers): (.+);\s?(deleted|Delete) (approvers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为审查人；移除了").concat(arguments.length<=6?void 0:arguments[6])})}},{pattern:/^(deleted|Delete) (approvers): (.+);\s?(Add) (approvers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了".concat(arguments.length<=3?void 0:arguments[3],"；将").concat(arguments.length<=6?void 0:arguments[6],"设为审查人")})}},{pattern:/^(Add) (approvers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为审查人")})}},{pattern:/^(deleted|Delete) (approvers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了审查人".concat(arguments.length<=3?void 0:arguments[3])})}},{pattern:/^approval\sgate\s:\s?(pass|reset)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){var t="";switch(arguments.length<=1?void 0:arguments[1]){case"pass":t="审查通过";break;case"reset":t="重置了审查状态"}return t})}},{pattern:/^(Add) (testers): (.+);\s?(deleted|Delete) (testers): (.*);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为测试人；移除了").concat(arguments.length<=6?void 0:arguments[6])})}},{pattern:/^(deleted) (testers): (.*);\s(Add) (testers): (.*);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了".concat(arguments.length<=3?void 0:arguments[3],"；将").concat(arguments.length<=6?void 0:arguments[6],"设为测试人")})}},{pattern:/^(Add) (testers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为测试人")})}},{pattern:/^(deleted|Delete) (testers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了测试人".concat(arguments.length<=3?void 0:arguments[3])})}},{pattern:/^test gate : (pass|reset)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){var t="";switch(arguments.length<=1?void 0:arguments[1]){case"pass":t="测试通过";break;case"reset":t="重置了测试状态"}return t})}},{pattern:/^(Add) (reviewers): (.+);\s?(deleted|Delete) (reviewers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为评审人；移除了").concat(arguments.length<=6?void 0:arguments[6])})}},{pattern:/^(deleted|Delete) (reviewers): (.+);\s?(add) (reviewers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了".concat(arguments.length<=3?void 0:arguments[3],"；将").concat(arguments.length<=6?void 0:arguments[6],"设为评审人")})}},{pattern:/^(Add) (reviewers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将".concat(arguments.length<=3?void 0:arguments[3],"设为评审人")})}},{pattern:/^(deleted|Delete) (reviewers): (.+);\s?/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了评审人".concat(arguments.length<=3?void 0:arguments[3])})}},{pattern:/Review Gate : (reset|pass|reject)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){var t="";switch(arguments.length<=1?void 0:arguments[1]){case"pass":t="通过了评审";break;case"reset":t="重置了评审状态";break;case"reject":t="评审拒绝"}return t})}}],discussion:[{pattern:/^resolved\s?(all)?\s?discussions/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return arguments.length<=1||!arguments[1]?"解决了问题":"解决了最后一个问题"})}}],merge:[{pattern:/pipeline/i,transform:function(e,t,r){r.type;return"关闭了pull request，自动合并已停用，以确保流水线成功后不会自动合并"}}],merged:[{pattern:/(merged) (from) (codehub|gitcode),?(.*),?merge_commit_sha:\s?([a-z0-9]+)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"合入了pull request，合并节点 SHA：".concat(arguments.length<=5?void 0:arguments[5])})}},{pattern:/(merged) (from) (codehub|gitcode),?(.*)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"合入了pull request"})}}],squash_commit_message:[{pattern:/add squash commit message (.*)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"添加了 squash commit 备注：".concat(arguments.length<=1?void 0:arguments[1])})}},{pattern:/changed squash commit message from ([\s\S]*) to ([\s\S]*)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"将pull request提交信息修改为 “".concat(arguments.length<=2?void 0:arguments[2],"” ，原信息为 “").concat(arguments.length<=1?void 0:arguments[1],"” ")})}},{pattern:/remove squash commit message (.*)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"移除了pull request提交信息 “".concat(arguments.length<=1?void 0:arguments[1],"” ")})}}],commit:[{pattern:/virtual merging failed, create merge request\[(.*)], message: (.*)/i,transform:function(e,t,r){r.type;var n=r.data;return e.replace(t,function(e){var t=o(arguments.length<=1?void 0:arguments[1]),t=(null==t||null==(t=t.target_commit_sha)?void 0:t.substring(0,8))||"";return'创建了 pull request，commit <a class="text-primary" href="/'.concat(n.project,"/commits/detail/").concat(t,'">').concat(t,"</a>")})}},{pattern:/create merge request\[(.*)], virtual merging success/i,transform:function(e,t,r){r.type;var n=r.data;return e.replace(t,function(e){var t=o(arguments.length<=1?void 0:arguments[1]),t=(null==t||null==(t=t.commit_id)?void 0:t.substring(0,8))||"";return'创建了 pull request，commit <a class="text-primary" href="/'.concat(n.project,"/commits/detail/").concat(t,'">').concat(t,"</a>")})}}],visible:[{pattern:/made the (issue) visible to everyone/i,transform:function(e,t,r){r.type,r.data;return e.replace(t,function(e){return"将 ".concat(arguments.length<=1?void 0:arguments[1]," 设置为公开")})}}],null:[{pattern:/^(added) (\d+) commits?, (.*)/i,transform:function(e,t,r){r.type;var r=e.match(/added (\d+) commits?/),n=e.match(/\((https?:.+.[netcom]{2,3}\/(.+)\/merge_requests\/.+start_sha=(\S+))\)/),e=(e=e.match(/<li>([\s\S]*?)<\/li>/gi)).map(function(e){e=e.match(/([0-9a-z]{8}) - (.+)/);return"".concat(e[2],'-<a class="text-primary" href="/').concat(n[2],"/commits/detail/").concat(e[1],'">').concat(e[1],"</a>")});return"推送了 ".concat(r[1]," 个提交：").concat(e.join("，"))}},{pattern:/deleted source branch `(.+)`/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"删除了源分支：".concat(arguments.length<=1?void 0:arguments[1])})}},{pattern:/closed from (codehub|gitcode)/i,transform:function(e,t,r){var n=r.type;return e.replace(t,function(e){return"关闭了".concat(a.get(n))})}},{pattern:/.*(merge|merge request) is auto marked as (closed|merged),.*all the commits.*has been merged.*/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){var t="";return"closed"===(arguments.length<=2?void 0:arguments[2])?t="已关闭":"merged"===(arguments.length<=2?void 0:arguments[2])&&(t="已合并"),"pull request被自动标记为".concat(t,"，因为另一个pull request或推送已包含了其中的所有提交")})}},{pattern:/merged from (codehub|gitcode)/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"pull request被已合并"})}},{pattern:/update merge request(\[.*\]) virtual merging success/i,transform:function(e,t,r){r.type;return e.replace(t,function(e){return"更新了pull request"})}}]};window.formatBody=function(e){var t=e.action,r=e.data,n=e.type,a=e.body;try{if(i[t])for(var o=0;o<i[t].length;o++){var c=i[t][o],a=a.replace(/codehub/g,"gitcode");if(c.pattern.test(a)){a=c.transform(a,c.pattern,{type:n,data:r});break}}}catch(e){console.log("error:",e)}return a}}();